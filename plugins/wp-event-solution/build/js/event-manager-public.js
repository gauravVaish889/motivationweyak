(()=>{"use strict";const e=window.wp.i18n;jQuery(document).ready((function(t){var n=t(".etn-countdown-wrap");function a(e){var n=null;return t(e).find("input").each((function(){var e=t(this);if("required"===e.attr("data-etn_required")&&("checkbox"===e.attr("type")||"radio"===e.attr("type")))return n="input[name='"+e.attr("name")+"']",!1})),n}function i(e){var n=e?["input[name='name']","input[name='email']","input[name='phone']"]:["input[name='attendee_name[]']","input[name='attendee_email[]']","input[name='attendee_phone[]']"];if(t(".etn-attendee-extra-fields").length>0){var i=[];if(n=[],t("input:not(:submit,:hidden)").each((function(){i.push({name:this.name,value:this.value})})),t(".etn-checkbox-field-wrap").length>0&&t(".etn-checkbox-field-wrap").find("input").each((function(e){const i=a(t(this).parent());n.push(i)})),t(".etn-radio-field-wrap").length>0){const e=a(".etn-radio-field-wrap");n.push(e)}i.length>0&&i.map((function(e){var a=t("input[name='"+e.name+"']");"required"==a.attr("required")&&"hidden"!==a.attr("type")&&n.push("input[name='"+e.name+"']")}))}return n}function r(n,a){var i=[];t.each(n,(function(n,r){var d=t(r);switch(d.attr("type")){case"text":case"email":case"tel":case"number":case"date":void 0!==d.val()&&""!=d.val()||(d.addClass("attendee_error"),i.push(r));break;case"radio":case"checkbox":d.is('[data-etn_required="required"]')&&!d.is(":checked")&&(d.addClass("attendee_error"),i.push(r))}t(".attende_form").on("keyup change",r,(function(){var n=t(this),i=n.attr("type"),d=n.attr("id"),o=function(n,a,i=""){var r={error_type:"no_error",message:"success"};switch("radio"!==n||"checkbox"!==n?0==a.length?t(this).addClass("attendee_error"):t(this).removeClass("attendee_error"):t(i).is(":checked")?"radio"==n?t(this).parents(".etn-radio-field-wrap").find(".etn-attendee-extra-fields").removeClass("attendee_error"):"checkbox"==n&&t(this).parents(".etn-checkbox-field-wrap").find(".etn-attendee-extra-fields").removeClass("attendee_error"):t(this).addClass("attendee_error"),n){case"email":const n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;0!==a.length?0==n.test(String(a).toLowerCase())&&(r.error_type="not-valid",r.message=(0,e.__)("Email is not valid","eventin")):(r.error_type="empty",r.message=(0,e.__)("Please enter email address","eventin"));break;case"tel":0===a.length?(r.error_type="empty",r.message=(0,e.__)("Please fill the field","eventin")):a.length>15?(r.error_type="not-valid",r.message=(0,e.__)("Invalid phone number","eventin")):1==!a.match(/^\d+/)&&(r.error_type="not-valid",r.message=(0,e.__)("Only number allowed","eventin"));break;case"text":case"number":case"date":0===a.length&&(r.error_type="empty",r.message=(0,e.__)("Please fill the field","eventin"));break;case"radio":case"checkbox":t(i).is(":checked")||(r.error_type="not-selected",r.message=(0,e.__)("Please check the field","eventin"))}return r}(i,n.val(),r);"radio"===i?d=d.split("_radio_")[0]:"checkbox"===i&&(d=d.split("_checkbox_")[0]),t("."+d).html(""),void 0!==o&&"success"!==o.message?(t("."+d).html(o.message),t("#"+d).hasClass("attendee_error")||t("#"+d).addClass("attendee_error")):(t("#"+d).removeClass("attendee_error"),"radio"!=i&&"checkbox"!=i||n.parents(".etn-"+i+"-field-wrap").find(".etn-attendee-extra-fields").removeClass("attendee_error")),function(e){var n=t(".attendee_error").length,a=t(e);0===n?a.prop("disabled",!1).removeClass("attendee_submit_disable"):a.prop("disabled",!0).addClass("attendee_submit_disable")}(a)}))})),i.length>0?t(a).prop("disabled",!0).addClass("attendee_submit_disable"):t(a).prop("disabled",!1).removeClass("attendee_submit_disable")}if(n.length>0&&t.each(n,(function(n,a){var i=this;let r=t(a).data("start-date");var d=new Date(r).getTime();let o=setInterval((function(){var n=(new Date).getTime(),r=d-n,l=Math.floor(r/864e5),s=Math.floor(r%864e5/36e5),c=Math.floor(r%36e5/6e4),p=Math.floor(r%6e4/1e3);t(a).find(".day-count").html(l),t(a).find(".hr-count").html(s),t(a).find(".min-count").html(c),t(a).find(".sec-count").html(p),r<0&&(clearInterval(o),t(i).html((0,e.__)("Expired","eventin")))}),1e3)})),t(".attr-nav-pills>li>a").first().trigger("click"),t(document).on("click",".etn-tab-a",(function(e){e.preventDefault(),t(this).parents(".etn-tab-wrapper").find(".etn-tab").removeClass("tab-active"),t(this).parents(".etn-tab-wrapper").find(".etn-tab[data-id='"+t(this).attr("data-id")+"']").addClass("tab-active"),t(this).parents(".etn-tab-wrapper").find(".etn-tab-a").removeClass("etn-active"),t(this).parent().find(".etn-tab-a").addClass("etn-active")})),t(".attendee_submit").prop("disabled",!0).addClass("attendee_submit_disable"),t(".attende_form").submit((function(){t(".attendee_submit").prop("disabled",!0).addClass("attendee_submit_disable")})),t(".attendee_update_submit").length>0&&r(i(!0),".attendee_update_submit"),t(".attendee_submit").length>0&&r(i(!1),".attendee_submit"),t(".etn_event_inline_form").length){function p(e,n){let a=t(".etn-event-archive-wrap");const i=new URL(window.location);i.searchParams.set(n,e.value),window.history.pushState({},"",i);const r=new URLSearchParams(window.location.search);let d=r.get("etn_categorys"),o=r.get("etn_event_location"),l=r.get("etn_event_date_range"),s=r.get("etn_event_will_happen"),c=r.get("s");if(null!==c&&c.length||null!==o&&o.length||null!==d&&d.length||null!==l&&l.length||null!==s&&s.length){a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").addClass("loading");let e={action:"etn_event_ajax_get_data",etn_categorys:d,etn_event_location:o,etn_event_date_range:l,etn_event_will_happen:s,s:c},n=0;jQuery.ajax({url:localized_data_obj.ajax_url,data:e,method:"POST",beforeSend:function(){a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").addClass("loading"),n++,t(".etn-container").find(".etn-loader").each((function(){t(this).addClass("activate")}))},success:function(e){a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").removeClass("loading"),t(".etn-container").find(".etn-loader").each((function(){t(this).removeClass("activate")})),t(".etn_search_item_container").find(".etn-event-wrapper").html(e)},complete:function(){n--,n<=0&&a.parents(".etn_search_item_container").find(".etn_event_ajax_preloader").removeClass("loading")}})}}0===t(".etn-event-archive-wrap").length&&t(".etn-event-wrapper").before('<div class="etn_event_ajax_preloader"><div class="lds-dual-ring"></div></div>'),["etn_event_location","etn_categorys","etn_event_date_range","etn_event_will_happen"].map((e=>{t(`[name="${e}"]`).length&&t(e).on("change",(function(t){p(this,e)}))})),t(".etn_event_inline_form").find('[name="s"]').length&&t(".etn_event_inline_form").find('[name="s"]').on("keyup",(function(e){p(this,"s")})),t('select[name="etn_event_location"]').length>0&&t('select[name="etn_event_location"]').change((function(){p(this,"etn_event_location")})),t('select[name="etn_categorys"]').length>0&&t('select[name="etn_categorys"]').change((function(){p(this,"etn_categorys")})),t('select[name="etn_event_date_range"]').length>0&&t('select[name="etn_event_date_range"]').change((function(){p(this,"etn_event_date_range")}))}t(".etn-recurring-widget .etn-recurring-header").click((function(){t(".etn-recurring-widget").removeClass("active").addClass("no-active").find(".etn-zoom-event-notice").slideUp(),t(this).parents(".recurring-content").hasClass("active")?t(this).parents(".recurring-content").removeClass("active").find(".etn-form-wrap").slideUp():(t(".etn-recurring-widget .recurring-content.active .etn-form-wrap").slideUp(),t(".etn-recurring-widget .recurring-content.active").removeClass("active"),t(this).parents(".recurring-content").addClass("active").find(".etn-form-wrap").slideDown(),t(this).parents(".etn-recurring-widget").addClass("active").removeClass("no-active").find(".etn-zoom-event-notice").slideDown())})),t(document).mouseup((function(e){var n=t(".etn-recurring-widget");n.is(e.target)||0!==n.has(e.target).length||n.removeClass("no-active")})),t(document).ready((function(){var e=t(".etn-recurring-widget").length;t(".etn-recurring-widget").slice(0,3).show(),e<=3&&t("#seeMore").fadeOut(),t("body").on("click touchstart","#seeMore",(function(e){e.preventDefault(),t(".etn-recurring-widget:hidden").slice(0,3).slideDown(),0==t(".etn-recurring-widget:hidden").length&&t("#seeMore").fadeOut()}))}));var d=t(".etn-single-event-ticket-wrap");d.length>0&&t.each(d,((n,a)=>{!function(t,n){let a=n.find(".etn-event-form-parent");if(void 0!==a){let e=0;a.each((function(n){let a=t(this).data("etn_uid");var i=t(this).data("etn_uid",a),r=i.find(".variations_"+e),d=r.find(".etn-single-ticket-item"),o=d.length;if(void 0!==o&&1==o){var l=parseInt(i.find(".ticket_0").data("etn_min_ticket"));null!=l&&(i.find(".ticket_0").val(l),p(i,d,r))}d.each((function(e){var n=i.find(".etn_ticket_variation");c(n,e,t(this)),p(t(this),d,r),i.find(".etn_ticket_variation").on("keyup",(function(){let a=t(this);c(n,e,a)}))})),d.find(".qt-btn").on("click",(function(){var e=t(this),n=e.closest(".etn-quantity").find("input.etn_ticket_variation"),a=e.data("key"),o=d.parent(".variation_"+a);n.val(((t,n)=>Math.max(0,+n+1*e.data("multi")))),c(o,a,t(this)),p(i,d,r)})),d.find(".etn_ticket_variation").on("keyup",(function(){p(i,d,r)})),e++}))}var i=n.find("#etn-st-client-fname"),r=n.find("#etn-st-client-lname"),d=n.find("#etn-st-client-email"),o=n.find(".etn-add-to-cart-block");const l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var s=[i,r,d];function c(e,n,a=null){var i=t(".ticket_"+n),r=parseInt(i.data("etn_min_ticket")),d=parseInt(i.data("etn_max_ticket")),o=parseInt(i.data("etn_current_stock")),l=(parseInt(i.data("etn_cart_limit")),i.data("etn_cart_limit_message"),e.find(".show_message_"+n)),s=i.val();o<d&&(d=o),e.parents(".etn-single-ticket-item").next(".show_message").html("");let c=e,p=o;if(c.length>1&&(c=a,p=parseInt(c.data("etn_current_stock"))),parseInt(c.val())>p)return c.val("").val(p),void l.html("").html(c.data("stock_limit"));if(l.html(""),0!=d&&(0!=r||0!=d)){var m=a.siblings(".ticket_"+n).data("qty_message");s>=r&&s<=d?l.html(""):(i.val()>d&&(i.val(d),l.html(m)),i.val()<r&&i.val(r))}}function p(e,n,a){const i=t(".etn-event-form-parent.etn-ticket-variation");let r=i.data("decimal-number-points"),d=i.data("thousand-separator"),o=i.data("decimal-separator");null==r&&(r=2);const l=new Intl.NumberFormat(void 0,{minimumFractionDigits:r});var s=0,c=0,p=n.length,m="etn-add-to-cart-block";for(let e=0;e<p;e++){var h=parseInt(a.find(".ticket_"+e).val()),f=parseFloat(a.find(".ticket_"+e).data("price")).toFixed(r)*h,_=l.format(f).replace(/,/g,d).replace(/\./g,o);n.find("._sub_total_"+e).text(_),s+=f,c+=h}const u=l.format(s).replace(/,/g,d).replace(/\./g,o);a.find(".variation_total_price").html(u).val(u),a.find(".variation_total_qty").html(c).val(c),a.find(".variation_picked_total_qty").val(c),c>0?(t("."+m).removeAttr("disabled").removeClass("disabled"),n.find(".etn_ticket_variation").removeClass("variation_qty_error")):(e.find("."+m).attr("disabled","disabled").addClass("disabled"),n.find(".etn_ticket_variation").addClass("variation_qty_error"));const g=e.find("#etn-st-client-fname"),v=e.find("#etn-st-client-lname"),b=e.find("#etn-st-client-email");(g.length>0||v.length>0||b.length>0)&&(""===g.val()||""===v.val()||""===b.val()?e.find("."+m).attr("disabled","disabled").addClass("disabled"):e.find("."+m).removeAttr("disabled").removeClass("disabled"))}t.each(s,(function(a,s){t(s).on("keyup",(function(){!function(e,t,n,a){(e.length>0||t.length>0||n.length>0)&&(""==e.val()||""==t.val()||""==n.val()?a.attr("disabled","disabled").addClass("disabled"):a.removeAttr("disabled").removeClass("disabled"))}(i,r,d,o),n.find(".client_fname_error").html(""),n.find(".client_lname_error").html(""),n.find(".client_email_error").html(""),""==i.val()&&n.find(".client_fname_error").html((0,e.__)("Please fill the field","eventin")),""==r.val()&&n.find(".client_lname_error").html((0,e.__)("Please fill the field","eventin")),""==d.val()?n.find(".client_email_error").html((0,e.__)("Please fill the field","eventin")):0==l.test(String(d.val()).toLowerCase())&&n.find(".client_email_error").html((0,e.__)("Email is not valid","eventin"))}))}))}(t,t(a))}));const o=t(".etn-ticket-single-variation-title"),l=t(".etn-attendee-form-wrap");t.each(o,((e,n)=>{t(n).click((()=>{const e=t(n).data("ticket_name");t(n).toggleClass("etn-attendee-ticket-collapsed"),t.each(l,((n,a)=>{t(a).data("ticket_name")==e&&t(a).slideToggle()}))}))}));const s=document.getElementById("etn_ticket_download_btn");s&&s?.addEventListener("click",(async function(e){await async function(){const e=window.jspdf.jsPDF,t=document.getElementsByClassName("etn-ticket-download-wrapper")[0];if(!t)return console.error("Ticket element not found"),!1;const n=t.getBoundingClientRect(),a=n.width,i=n.height;let r=i>a,d=r?595:842,o=r?842:595;const l=d/a,s=o/i,c=Math.min(l,s);let p=t.innerHTML;p=p.split('<div class="etn-download-ticket">')[0];const m=document.createElement("div");m.innerHTML=`\n    <style>\n      .pdf-wrapper {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: ${d}px;\n        height: ${o}px;\n        background: white;\n      }\n      .etn-ticket-main-wrapper {\n        max-width: fit-content;\n        width: 100%;\n        height: auto;\n        margin: 20px auto;\n        border-radius: 14px;\n        padding: 20px;\n        border: 1px solid #d8d9df;\n        transform: scale(${c});\n        transform-origin: center center;\n      }\n      .etn-ticket {\n        display: flex;\n        flex-direction: column;\n      }\n    </style>\n    <div class="pdf-wrapper">\n      ${p}\n    </div>\n  `,document.body.appendChild(m);try{const t=await html2canvas(m,{scale:7*c,useCORS:!0,backgroundColor:"#ffffff",width:d,height:o,imageTimeout:5e4,logging:!1,removeContainer:!0,onclone:function(e){const t=e.querySelector(".pdf-wrapper").getElementsByTagName("script");Array.from(t).forEach((e=>e.remove()))}}),n=new e(r?"p":"l","pt",[595,842]);n.addImage(t.toDataURL("image/jpeg",1),"JPEG",0,0,d,o,void 0,"FAST");const a=`ticket-${(new Date).toISOString().slice(0,10)}.pdf`;return n.save(a),document.body.removeChild(m),!0}catch(e){return document.body.removeChild(m),console.error("PDF generation failed:",e),!1}finally{document.body.contains(m)&&document.body.removeChild(m)}}()})),t("#purchase_ticket_form").on("submit",(()=>{t(".etn-add-to-cart-block").attr("disabled","disabled").addClass("disabled button--loading")}));const c=t(".etn-print-ticket-btn");c.length&&c.on("click",(function(){!function(){var e=window.open("","PRINT","height=400,width=800");e.document.write('<style type="text/css">.etn-ticket-main-wrapper{max-width:fit-content;width:100%;height:auto;margin:20px auto;border-radius:14px;padding:20px;border:1px solid #d8d9df}.etn-ticket{display:flex;flex-direction:column}.etn-ticket-logo-wrapper{text-align:center;padding-bottom:25px}.logo-shape{display:flex;justify-content:space-between;max-width:300px;margin:auto;align-items:center;margin-top:25px}span.logo-bar{border-bottom:1px solid #d8d9df;display:inline-block;width:100%;margin:0 5px}span.logo-bar.bar-two{width:18px;height:8px;background:#d8d9df;transform:rotate(45deg);border:none}.etn-ticket-head{border-bottom:2px dashed #eff0f1;margin-bottom:17px}.etn-ticket-head-title{color:#0d165e;font-size:24px;font-weight:700;margin:0 0 11 0}.etn-ticket-head-time{font-size:15;font-weight:400;margin-bottom:22px}.etn-ticket-body-top-ul{margin:0 0 30px 0;padding:0;list-style-type:none;display:grid;grid-template-columns:auto auto}.etn-ticket-body-top-li{font-size:14px;font-weight:700;color:#0d165e}.etn-ticket-body-top-li p{font-size:15px;font-weight:400;color:#656975}.etn-ticket-qr-code{text-align:center;border:1px soid #0d165e;border-radius:14px;font-weight:700;color:#0d165e}.etn-ticket-qr-code img{border:2px solid #0d165e;border-radius:14px}.etn-download-ticket{text-align:center;margin:30px auto;max-width:610px;display:flex;justify-content:space-between}.etn-download-ticket .etn-download-ticket-btn,.etn-download-ticket .etn-print-ticket-btn{background-color:#5d5dff;color:#fff;font-weight:700;font-size:16px;border:1px solid #5d5dff;border-radius:6px;width:100%}.etn-download-ticket .etn-print-ticket-btn{background-color:#fff;color:#5d5dff;margin-right:20px}.etn-qrImage{width:150px;height:150px}.etn-ticket-wrapper.ticket-style-2 .etn-ticket-content{flex:0 0 60%;max-width:60%;padding-left:30px;border-left:1px solid #eaeaea}.etn-ticket-wrapper.ticket-style-2 .etn-qrImage{width:100%;height:auto;max-width:200px;max-height:200px}.etn-ticket-wrapper.ticket-style-2 .etn-ticket-main-wrapper{padding:0;border:none; display: flex;}.etn-ticket-wrapper.ticket-style-2 .etn-ticket-body-top-li p,.etn-ticket-wrapper.ticket-style-2 .etn-ticket-body-top-li span{font-size:12px;font-weight:700;color:#A1A5AE;text-transform:uppercase;margin-right:5px}.etn-ticket-wrapper.ticket-style-2 .etn-ticket-body-top-li,.etn-ticket-wrapper.ticket-style-2 .etn-ticket-body-top-li p.etn-ticket-id{font-size:14px;font-weight:500;color:#11142E}.etn-ticket-wrapper.ticket-style-2 .etn-ticket-head{margin-bottom:30px;padding-bottom:20px}.etn-ticket-wrapper.ticket-style-2 .ticket-left-side {  flex: 0 0 30%; max-width: 30%;  padding-right: 30px; }</style>');var t=document.getElementsByClassName("etn-ticket-download-wrapper")[0].innerHTML;t=t.split('<div class="etn-download-ticket">')[0],e.document.write("</head><body >"),e.document.write(t),e.document.write("</body></html>"),e.document.close(),e.focus(),e.print()}()}))}))})();