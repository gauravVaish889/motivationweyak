"use strict";(self.webpackChunkwp_event_solution=self.webpackChunkwp_event_solution||[]).push([[655],{72397:(e,t,n)=>{n.d(t,{A:()=>_});var a=n(51609),r=n(27723),i=n(54861),l=n(47152),o=n(16370),s=n(60742),m=n(74353),d=n.n(m),c=n(17437),u=n(6836),v=n(78847);const _=e=>{const{startDate:t,endDate:n,startTime:m,endTime:_,dateRange:g,dateRangeLabel:p=(0,r.__)("Start Date & End Date","eventin"),endDateLabel:f=(0,r.__)("End Date & Time","eventin"),form:E,gutter:h=[8,0],mdCol:x=6,xsCol:y=12}=e,A=n,D=t,b=m,T=_,{RangePicker:F}=i.A,w=d()(new Date),C=[{required:!0,message:(0,r.__)("Please select date range","eventin")},({getFieldValue:e})=>({validator(t,n){const a=e(A),i=d()(n),l=d()(a);return a&&l.isBefore(i)?Promise.reject((0,r.__)("End Date can't be before Start date!","eventin")):Promise.resolve()}})],k=[{required:!0,message:(0,r.__)("Please select start date","eventin")},({getFieldValue:e})=>({validator(t,n){const a=e(D),i=e(A),l=e(T);if(a&&i&&l){const e=(0,u.getFormattedDateTime)({date:a,time:n});if((0,u.getFormattedDateTime)({date:i,time:l}).isBefore(e,"minutes"))return Promise.reject((0,r.__)("Start time must be before end time","eventin"))}return Promise.resolve()}})],Y=[{required:!0,message:(0,r.__)("Please select end date","eventin")},({getFieldValue:e})=>({validator(t,n){const a=e(D),i=e(A),l=e(b);if(a&&i&&l){const e=(0,u.getFormattedDateTime)({date:a,time:l});if((0,u.getFormattedDateTime)({date:i,time:n}).isBefore(e,"minutes"))return Promise.reject((0,r.__)("End time must be after start time","eventin"))}return Promise.resolve()}})];return c.AH`
		.ant-picker {
			background-color: red;
		}
	`,(0,a.createElement)(l.A,{gutter:h},(0,a.createElement)(o.A,{xl:12,md:24},(0,a.createElement)(s.A.Item,{label:p,name:g,dependencies:[n],rules:C,className:"eventin-date-range-picker-wrapper"},(0,a.createElement)(F,{className:"eventin-date-range-picker",size:"large",style:{width:"100%"},minDate:w,format:(0,u.getDateFormat)(),onChange:e=>{const t={start_date:d()(e[0]).format("YYYY-MM-DD"),end_date:d()(e[1]).format("YYYY-MM-DD")},n=(0,u.dateFormatter)(t.start_date),a=(0,u.dateFormatter)(t.end_date);E.setFieldsValue({[D]:n,[A]:a})},popupClassName:"etn-ant-date-range-picker",placeholder:[(0,r.__)("Start Date","eventin"),(0,r.__)("End Date","eventin")]}))),(0,a.createElement)(o.A,{xs:12,xl:x,md:y,className:"eventin-start-time-range-picker-wrapper"},(0,a.createElement)(v.A,{label:(0,r.__)("Start Time","eventin"),name:m,rules:k})),(0,a.createElement)(o.A,{xs:12,xl:x,md:y,className:"eventin-end-time-range-picker-wrapper"},(0,a.createElement)(v.A,{label:(0,r.__)("End Time","eventin"),name:_,rules:Y})))}},18655:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var a=n(51609),r=n(56427),i=n(29491),l=n(47143),o=n(86087),s=n(27723),m=n(52619),d=n(67313),c=n(60742),u=n(92911),v=n(47152),_=n(16370),g=n(47767),p=n(74353),f=n.n(p),E=n(27154),h=n(54725),x=n(7638),y=n(72397),A=n(79664),D=n(18062),b=n(75613),T=n(59292),F=n(10012),w=n(6836),C=n(64282),k=n(69815);const{Title:Y,Text:S}=d.A,N=(0,l.withDispatch)((e=>{const t=e("eventin/global");return{setShouldRevalidateEventList:t.setRevalidateEventList,setTotalCount:e=>t.setTotalEvents(e)}})),M=(0,i.compose)(N)((function(e){const[t,n]=(0,o.useState)(!1),{setShouldRevalidateEventList:i,setTotalCount:l}=e,[d]=c.A.useForm(),p=(0,g.useNavigate)(),N=k.default.div`
		@media ( max-width: 460px ) {
			display: none;
		}
	`;return(0,a.createElement)("div",null,(0,a.createElement)(r.Fill,{name:E.PRIMARY_HEADER_NAME},(0,a.createElement)(u.A,{justify:"space-between",align:"center",gap:10,wrap:"wrap"},(0,a.createElement)(u.A,{align:"center",gap:16},(0,a.createElement)(x.Ay,{variant:x.Vt,icon:(0,a.createElement)(h.AngleLeftIcon,null),sx:{height:"36px",width:"36px",backgroundColor:"#fafafa",borderColor:"transparent",lineHeight:"1"},onClick:()=>p("/events")}),(0,a.createElement)(D.A,{title:(0,s.__)("Create New Event","eventin")})),(0,a.createElement)(N,null,(0,a.createElement)(A.A,null)))),(0,a.createElement)(v.A,{gutter:[16,10],justify:"center",style:{margin:"10px 0px"},className:"eventin-create-event-form"},(0,a.createElement)(_.A,{md:12,xs:22,className:"eventin-create-event-form-container"},(0,a.createElement)(Y,{level:3,style:{fontWeight:600,margin:"13px 0 8px 0",fontSize:"26px",lineHeight:"32px"}},(0,s.__)("Create your new event","eventin")),(0,a.createElement)(S,null,(0,s.__)("Draft first, edit later: Build your event step-by-step and refine it as you go.","eventin")),(0,a.createElement)(Y,{level:4,style:{fontWeight:600,margin:"60px 0 20px 0",fontSize:"18px"}},(0,a.createElement)(h.ListOutlinedBorder,null)," ",(0,s.__)("Basic Information","eventin")),(0,a.createElement)(c.A,{form:d,name:"event-create-form",layout:"vertical",autoComplete:"on",onFinish:async()=>{const e={...d.getFieldsValue(!0)},t=e?.date_range,a={start_date:f()(t[0]).format("YYYY-MM-DD"),end_date:f()(t[1]).format("YYYY-MM-DD")},r=(0,w.dateFormatter)(a.start_date),o=(0,w.dateFormatter)(a.end_date),c=e.location,{address:u,place_id:v,latitude:_,longitude:g,...E}=Object.assign({},c);"offline"===e?.event_type?e.location={address:u?.toString()||"",place_id:v,latitude:_,longitude:g}:("custom_url"!==E?.integration&&(E.custom_url=""),e.location=E),n(!0);const h={...e,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,start_date:r,end_date:o,recurring_enabled:e.recurring_enabled?"yes":"no",event_recurrence:{...e.event_recurrence}};try{const e=await C.A.events.createEvent(h);l(1),i(!0),p(`${e?.id}/basic`),(0,m.doAction)("eventin_notification",{type:"success",message:(0,s.__)("Event Created successfully","eventin")})}catch(e){console.error("Something went wrong while creating event!"),console.error(e),(0,m.doAction)("eventin_notification",{type:"error",message:(0,s.__)("Couldn't Create Event!","eventin")})}finally{n(!1)}},scrollToFirstError:!0,initialValues:{interval_unit:"days",event_type:"offline"},requiredMark:(e,{required:t})=>(0,a.createElement)(a.Fragment,null,e,t&&(0,a.createElement)("span",{style:{color:"#FF4D4F",marginLeft:"4px"}},"*")),size:"large"},(0,a.createElement)(F.QN,{label:(0,s.__)("Event Title","eventin"),name:"title",required:!0,contextId:"eventin-event-title",tokenType:"short",tooltip:(0,s.__)("Event Title (This is the main title displayed for your event. Keep it catchy and informative.)","eventin"),form:d,rules:[{required:!0,message:(0,s.__)("Event title is required","eventin")}]}),(0,a.createElement)(y.A,{dateRange:"date_range",startDate:"start_date",startTime:"start_time",endDate:"end_date",endTime:"end_time",form:d}),(0,a.createElement)(T.A,{form:d,unitName:"recurrence_freq",intervalName:"recurrence_daily_interval",checkBoxName:"recurring_enabled",eventEnds:"recurrence_ends_on"}),(0,a.createElement)(Y,{level:4,style:{fontSize:"18px",fontWeight:600,margin:"24px 0 22px 0"}},(0,a.createElement)(h.LocationOutlinedAlt,{width:18,height:18})," ",(0,s.__)("Event Type","eventin")),(0,a.createElement)(b.A,{form:d}),(0,a.createElement)(u.A,{gap:10,justify:"end",style:{margin:"42px 0px 0",padding:"20px 0",borderTop:"1px solid #D9D9D9"}},(0,a.createElement)(x.Ay,{variant:x.Qq,onClick:()=>{p("/events")},sx:{fontSize:"16px",fontWeight:"600",height:"44px",lineHeight:"1",color:"#747474"}},(0,s.__)("Close","eventin")),(0,a.createElement)(x.Ay,{variant:x.zB,loading:t,htmlType:"submit",sx:{fontSize:"16px",fontWeight:"600",height:"44px",lineHeight:"1"}},(0,s.__)("Create Event","eventin")))))))}))}}]);